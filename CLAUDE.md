## タスク実行の4段階フロー

### 1. 要件定義
- `doc/requirements.md`が存在すれば参照して設計フェーズに進む。
- `doc/requirements.md`が存在しなければ、以下を確認して文書化する。
  - 私が作りたいxxxxxxアプリについて、ビジネス仮説と要件を整理するために質問を10個投げかけてください。
  - それに答えることで、本当に必要な機能と成功指標を明確にしたいです。
  - 質問した結果は`claude-sample/requirements-sample.md`を参考にしてまとめてください。

### 2. 設計
- **必ず`doc/requirements.md`を読み込んでから開始**
- `doc/design.md`が存在すれば参照してタスク化フェーズに進む。
- `doc/design.md`が存在しなければ、以下を意識して文書化する。
  - 作成した要件定義（doc/requirements.md）の内容を基に設計をする。
  - `claude-sample/design-sample.md`を参考にして、/docの中に設計書を作成してください。

### 3. タスク化
- **必ず`doc/design.md`を読み込んでから開始**
- `doc/tasks.md`が存在すれば参照して実装フェーズに進む。
- `doc/tasks.md`が存在しなければ、以下を意識して文書化する。
  - 要件定義書（doc/requirements.md）と設計書（doc/design.md）を基にタスク化する。
  - `claude-sample/tasks-sample.md` を参考にして、/docの中にタスク（tasks.md）分割を行ってください。

### 4. 実装
- **必ず`doc/requirements.md`を読み込んでから開始**
- **必ず`doc/design.md`を読み込んでから開始**
- **必ず`doc/tasks.md`を読み込んでから開始**
- タスク（tasks.md）に従って段階的に開発
- タスクを順次実行、進捗を`doc/tasks.md`に更新 
- TDDを徹底（テストファースト） 
- 各実装後は必ず自動品質チェック実行
- 報告フォーマットは以下の通り
```
## 報告フォーマット
- 実行日時:
- 実行環境:
- チェック結果:
  - コード品質チェック: [合格/不合格]
  - テスト実行: [合格/不合格]
- エラー内容（あれば）:
- 自動修正内容（あれば）:
```

## 実装ルール
### ファイル操作
- 新規タスク開始時: 既存ファイルの**内容を全て削除して白紙から書き直す**
- ファイル編集前に必ず現在の内容を確認

### フェーズ管理
- 各段階開始時: 「前段階のmdファイルを読み込みました」と報告
- 各段階の最後に、期待通りの結果になっているか確認
- 要件定義なしにいきなり実装を始めない

### コード生成後の自動実行

#### コード生成後の自動実行（TypeScript）
1. `npm run type-check` でTypeScriptチェック
2. `npm run lint` でコード品質チェック
3. `npm run test` でテスト実行
4. エラーがあれば自動修正
5. 全チェック通過後に人間に報告

#### コード生成後の自動実行（Kotlin）
1. `./gradlew ktlintCheck` でKotlinコードスタイルチェック
2. `./gradlew test` でテスト実行
3. エラーがあれば自動修正
4. 全チェック通過後に人間に報告

#### コード生成後の自動実行（Python）
1. `pylint <module_name>` でPythonコード品質チェック
2. `pytest` でテスト実行
3. エラーがあれば自動修正
4. 全チェック通過後に人間に報告

### 実行方針
- 段階的に進める: 一度に全てを変更せず、小さな変更を積み重ねる
- 複数のタスクを同時並行で進めない
- エラーは解決してから次へ進む
- エラーを無視して次のステップに進まない
- 指示にない機能を勝手に追加しない